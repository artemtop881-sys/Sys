<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Security Message ¬∑ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —á–∞—Ç</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- –ù–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="theme-neon-blue" id="body">
    <div class="phone-frame" id="app">
        <!-- –≠–ö–†–ê–ù –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò -->
        <div id="authScreen" class="auth-screen">
            <div class="auth-container">
                <div class="auth-logo">
                    <i class="fas fa-shield-hal"></i>
                </div>
                <h1 class="auth-title">SECURITY</h1>
                <div class="auth-subtitle">–ì–ª–æ–±–∞–ª—å–Ω—ã–π —á–∞—Ç ‚Ä¢ –°—Ç–∏–∫–µ—Ä—ã ‚Ä¢ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
                
                <div id="loginForm" class="auth-form">
                    <div class="auth-input-group">
                        <input type="text" id="loginUsername" class="auth-input" placeholder="–õ–æ–≥–∏–Ω –∏–ª–∏ @—é–∑–µ—Ä–Ω–µ–π–º">
                    </div>
                    <div class="auth-input-group">
                        <input type="password" id="loginPassword" class="auth-input" placeholder="–ü–∞—Ä–æ–ª—å">
                    </div>
                    <button class="auth-button" onclick="window.auth.login()">–í–û–ô–¢–ò</button>
                    <div class="auth-switch" onclick="window.auth.showRegister()">
                        <span>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
                    </div>
                </div>

                <div id="registerForm" class="auth-form hidden">
                    <div class="auth-input-group">
                        <input type="text" id="regName" class="auth-input" placeholder="–ò–º—è">
                    </div>
                    <div class="auth-input-group">
                        <input type="text" id="regUsername" class="auth-input" placeholder="@—é–∑–µ—Ä–Ω–µ–π–º">
                    </div>
                    <div class="auth-input-group">
                        <input type="password" id="regPassword" class="auth-input" placeholder="–ü–∞—Ä–æ–ª—å">
                    </div>
                    <div class="auth-input-group">
                        <textarea id="regBio" class="auth-input" placeholder="–û —Å–µ–±–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" style="height: 80px; resize: none;"></textarea>
                    </div>
                    <button class="auth-button" onclick="window.auth.register()">–°–û–ó–î–ê–¢–¨</button>
                    <div class="auth-switch" onclick="window.auth.showLogin()">
                        <span>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
        <div id="mainScreen" class="main-screen hidden">
            <div class="main-header">
                <h1>
                    <i class="fas fa-shield-hal" style="color: var(--accent);"></i>
                    SECURITY
                </h1>
                <div class="header-icons">
                    <i class="fas fa-star" onclick="window.favorites.open()"></i>
                    <i class="fas fa-cog" onclick="window.settings.open()"></i>
                </div>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" onclick="window.chats.switchTab('chats', this)">
                    <i class="fas fa-comment"></i> –ß–∞—Ç—ã
                </button>
                <button class="nav-tab" onclick="window.chats.switchTab('global', this)">
                    <i class="fas fa-globe"></i> –ì–ª–æ–±–∞–ª—å–Ω—ã–π
                </button>
                <button class="nav-tab" onclick="window.chats.switchTab('users', this)">
                    <i class="fas fa-users"></i> –õ—é–¥–∏
                </button>
            </div>

            <div class="search-section">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="globalSearch" placeholder="–ü–æ–∏—Å–∫ –ª—é–¥–µ–π..." onkeyup="window.chats.searchUsers()">
                </div>
            </div>

            <div class="main-content" id="contentArea">
                <div id="chatsContent">
                    <div class="chats-list" id="chatsList"></div>
                </div>
                <div id="globalContent" class="hidden">
                    <div class="chats-list" id="globalMessages"></div>
                </div>
                <div id="usersContent" class="hidden">
                    <div class="chats-list" id="usersList"></div>
                </div>
            </div>

            <div class="bottom-nav">
                <div class="nav-item active" onclick="window.chats.switchMainTab('chats', this)">
                    <i class="fas fa-comment"></i>
                    <span>–ß–∞—Ç—ã</span>
                </div>
                <div class="nav-item" onclick="window.profile.open()">
                    <i class="fas fa-user"></i>
                    <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                </div>
                <div class="nav-item" onclick="window.favorites.open()">
                    <i class="fas fa-star"></i>
                    <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù –ß–ê–¢–ê -->
        <div id="chatScreen" class="chat-screen hidden">
            <div class="chat-header">
                <div class="back-button" onclick="window.chats.closeChat()">
                    <i class="fas fa-arrow-left"></i>
                </div>
                <div class="header-avatar" id="chatHeaderAvatar">
                    <span id="chatAvatarText">U</span>
                </div>
                <div class="header-info">
                    <div class="header-title" id="chatHeaderTitle">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div class="header-status" id="chatHeaderStatus">–æ–Ω–ª–∞–π–Ω</div>
                </div>
                <div class="chat-actions">
                    <i class="fas fa-smile" onclick="window.chats.toggleStickers()"></i>
                    <i class="fas fa-star" onclick="window.favorites.addFromChat()"></i>
                </div>
            </div>

            <div class="messages-container" id="messagesContainer"></div>

            <div id="stickerPicker" class="sticker-picker hidden">
                <div class="sticker-item" onclick="window.chats.sendSticker('üçí')">üçí</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('‚ù§Ô∏è')">‚ù§Ô∏è</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('üî•')">üî•</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('‚ú®')">‚ú®</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('üåü')">üåü</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('üéà')">üéà</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('üéâ')">üéâ</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('üí´')">üí´</div>
                <div class="sticker-item" onclick="window.chats.sendSticker('‚≠ê')">‚≠ê</div>
            </div>

            <div class="message-input-area">
                <input type="text" id="messageInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter') window.chats.sendMessage()">
                <i class="fas fa-paper-plane" onclick="window.chats.sendMessage()"></i>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø -->
        <div id="profileScreen" class="profile-screen hidden">
            <div class="profile-header-bar">
                <div class="back-button" onclick="window.profile.close()">
                    <i class="fas fa-arrow-left"></i>
                </div>
                <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
            </div>

            <div class="profile-header">
                <div class="profile-avatar-large" id="profileAvatarLarge" onclick="window.profile.changeAvatar()">
                    <span id="profileAvatarText">U</span>
                    <i class="fas fa-camera"></i>
                </div>
                <div class="profile-name" id="profileNameLarge">
                    Username
                    <span id="profileVerifiedBadge" class="hidden"><i class="fas fa-check-circle"></i></span>
                </div>
                <div class="profile-username" id="profileUsernameLarge">@username</div>
                <div class="profile-id" id="profileId">ID: 0</div>
                <div class="profile-balance" id="profileBalance">
                    <i class="fas fa-star"></i> <span id="balanceAmount">0</span>
                </div>
                <div class="profile-bio" id="profileBioText">–ü—Ä–∏–≤–µ—Ç! –Ø –≤ Security</div>
            </div>

            <div class="profile-settings">
                <div class="settings-item" onclick="window.profile.changeName()">
                    <span class="settings-label">–ò–º—è</span>
                    <span class="settings-value" id="settingsName">Username</span>
                </div>
                <div class="settings-item" onclick="window.profile.changeUsername()">
                    <span class="settings-label">–Æ–∑–µ—Ä–Ω–µ–π–º</span>
                    <span class="settings-value" id="settingsUsername">@username</span>
                </div>
                <div class="settings-item" onclick="window.profile.changeBio()">
                    <span class="settings-label">–û —Å–µ–±–µ</span>
                    <span class="settings-value" id="settingsBio">–ü—Ä–∏–≤–µ—Ç!</span>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù –ò–ó–ë–†–ê–ù–ù–û–ì–û -->
        <div id="favoritesScreen" class="favorites-screen hidden">
            <div class="favorites-header-bar">
                <div class="back-button" onclick="window.favorites.close()">
                    <i class="fas fa-arrow-left"></i>
                </div>
                <h2>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
            </div>

            <div class="favorites-section">
                <div class="favorites-header">
                    <div class="favorites-title">
                        <i class="fas fa-star"></i> –ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏
                    </div>
                    <button class="add-favorite-btn" onclick="window.favorites.showAddModal()">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å
                    </button>
                </div>
                <div id="favoritesList"></div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù –ù–ê–°–¢–†–û–ï–ö -->
        <div id="settingsScreen" class="settings-screen hidden">
            <div class="settings-header-bar">
                <div class="back-button" onclick="window.settings.close()">
                    <i class="fas fa-arrow-left"></i>
                </div>
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            </div>

            <div class="settings-section">
                <div class="settings-group-label">–¢–ï–ú–´</div>
                <div class="themes-grid">
                    <div class="theme-option" onclick="window.settings.setTheme('neon-blue')" style="background: #3b82f6;"></div>
                    <div class="theme-option" onclick="window.settings.setTheme('neon-red')" style="background: #ef4444;"></div>
                    <div class="theme-option" onclick="window.settings.setTheme('neon-green')" style="background: #10b981;"></div>
                    <div class="theme-option" onclick="window.settings.setTheme('neon-purple')" style="background: #a855f7;"></div>
                </div>

                <div id="adminPanelContainer" class="hidden">
                    <div class="settings-group-label">–ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨</div>
                    <div class="settings-item" onclick="window.admin.showPanel()">
                        <i class="fas fa-crown"></i>
                        <div class="settings-item-content">
                            <div class="settings-item-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                            <div class="settings-item-subtitle">–í—ã–¥–∞—á–∞ –≥–∞–ª–æ—á–µ–∫, –∑–≤—ë–∑–¥, –∞–¥–º–∏–Ω–∫–∏</div>
                        </div>
                    </div>
                </div>

                <div class="settings-group-label">–ê–ö–ö–ê–£–ù–¢</div>
                <div class="settings-item" onclick="window.auth.logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <div class="settings-item-content">
                        <div class="settings-item-title">–í—ã–π—Ç–∏</div>
                        <div class="settings-item-subtitle">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ–∞–Ω—Å</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ó–ê–ú–ï–¢–ö–ò -->
    <div id="addFavoriteModal" class="modal hidden">
        <div class="modal-content">
            <h2><i class="fas fa-star"></i> –ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</h2>
            <textarea id="favoriteText" placeholder="–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏..." style="height: 120px;"></textarea>
            <button onclick="window.favorites.add()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <div class="modal-close" onclick="window.ui.closeModal('addFavoriteModal')">–û—Ç–º–µ–Ω–∞</div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–ò -->
    <div id="adminPanelModal" class="modal hidden">
        <div class="modal-content admin-modal">
            <h2><i class="fas fa-crown"></i> –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
            
            <div class="stats-section">
                <h3>üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</span>
                        <span class="stat-value" id="statsUsers">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π:</span>
                        <span class="stat-value" id="statsMessages">0</span>
                    </div>
                </div>
            </div>

            <div class="admin-section">
                <h3>‚úÖ –í–´–î–ê–¢–¨ –ì–ê–õ–û–ß–ö–£</h3>
                <select id="verifyUserSelect" class="admin-select"></select>
                <button onclick="window.admin.verifyUser()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
            </div>

            <div class="admin-section">
                <h3>‚≠ê –í–´–î–ê–¢–¨ –ó–í–Å–ó–î–´</h3>
                <select id="starsUserSelect" class="admin-select"></select>
                <input type="number" id="starsAmountAdmin" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥">
                <button class="gold-button" onclick="window.admin.giveStars()">–í—ã–¥–∞—Ç—å</button>
            </div>

            <div class="admin-section">
                <h3>üëë –ù–ê–ó–ù–ê–ß–ò–¢–¨ –ê–î–ú–ò–ù–ê</h3>
                <select id="adminUserSelect" class="admin-select"></select>
                <button class="gold-button" onclick="window.admin.makeAdmin()">–ù–∞–∑–Ω–∞—á–∏—Ç—å</button>
            </div>

            <div class="modal-close" onclick="window.ui.closeModal('adminPanelModal')">–ó–∞–∫—Ä—ã—Ç—å</div>
        </div>
    </div>

    <!-- –ù–∞—à–∏ JavaScript —Ñ–∞–π–ª—ã -->
    <script src="js/firebase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/favorites.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
  </html>
